# Open Questions

## Open Questions

Most original questions are resolved (143 decisions across 31 rounds). Remaining items are tuning values and deferred systems:

### Tuning Values
1. **K constant for Soak formula**: What value of K in `Soak[family]/(Soak[family]+K)` produces the desired damage reduction curve? Needs testing with target stat ranges.
2. **Global Initiative Multiplier exact default**: ~3.0 is the starting point; actual value depends on desired actions-per-character-per-fight.
3. ~~**Crit bonus formula**~~: **Resolved** — percentage of base: `output = base × (1 + crit_multiplier)`. Crit multiplier is a tuning value (e.g., 0.5 for +50%).
4. ~~**Stealth break-on-damage probability formula**~~: **Resolved** — `break_chance = damage_taken / (stealth_stacks × K)`. K is a tuning value.
5. **Revival Health fraction**: What percentage of max HP does a revived character return with?
6. ~~**Resistance reduction formulas**~~: **Resolved** — percentage with diminishing returns: `value × (1 - resist_ratio)` where `resist_ratio = Resistance / (Resistance + K)`. Same formula and K for both stack reduction and damage reduction per type.
7. **Judgment scaling multiplier and mapping functions**: Per-stat scaling multiplier for Judgment, and the functions mapping Judgment to tactical-vs-personality blend (0.3–0.95), selection sharpness (1–10), and lookahead depth (1–10 ticks).
8. **Stamina regen percentage**: What X% of max pool per tick produces good Stamina pacing?
9. **Defend boost percentages**: What fixed % boost to Defense/Soak and what Y% Stamina burst feels right for the Defend action?
10. **Attrition ramp defaults**: Default onset tick (~100), escalation rate (+0.5–1%/tick), and per-event-type overrides.
11. **Perk Discovery per-Trait rate**: What base rate per qualifying Trait produces similar per-fight discovery rates to the old per-use model?
12. **Per-family Soak scaling multipliers**: What scaling multipliers for the 3 Soak families produce desired damage reduction ranges at target attribute levels?
13. **Physical Defense scaling multiplier**: What scaling multiplier for Physical Defense produces the desired hit/miss rates?
14. **Default Attack Stamina cost**: What small Stamina cost for the default Attack action creates meaningful Stamina pressure without being prohibitive?
15. **Crit multiplier value**: What `crit_multiplier` (e.g., 0.5 for +50%) produces good crit impact?
16. **Stealth break K constant**: What K in `damage_taken / (stealth_stacks × K)` produces the desired stealth fragility?
17. **Resistance K constant(s)**: What K per resistance type in `Resistance / (Resistance + K)` produces desired stack/damage reduction curves?
18. **Summon control capacity multipliers**: What per-Trait capacity formulas and per-summon control costs produce desired summon counts (2-5 for dedicated summoners)?
19. **K_pen constant for Penetration DR**: What K_pen in `Pen × K_pen / (Pen + K_pen)` produces the desired Penetration curve?
20. **K_armor constant for Might armor mitigation**: What K_armor in `Might / (Might + K_armor)` produces desired armor penalty reduction?
21. **Block Chance/Value per shield type**: Buckler (~20%/low), Kite (~35%/med), Tower (~50%/high) — exact values TBD.
22. **Status decay rates per type**: Per-status decay percentages and attribute divisors (e.g., Burning 25%, Stun Willpower/10).
23. **Effects Phase tiebreaker for equal stack counts**: When multiple statuses on a character have the same stack count, the deterministic ordering (alphabetical by status name or definition order) needs to be confirmed at implementation time.

### Deferred Systems
12. **Morale**: Full design deferred to Phase 4.
13. **Channeled abilities and interrupts**: Deferred to Phase 2+.
14. **Zone variants and gimmicks**: Deferred to Phase 4.
15. **Zone effects**: Deferred to Phase 4.

### Moved to Other Specs
- **Injury roll probability tables**: Moved to [post-combat](../post-combat.md) open questions.

---

## Implications for Other Specs

| Spec | Implication |
|------|-------------|
| [combat-ai](../combat-ai.md) | AI must understand zones, ranges, action options, and target selection across 2+ teams ("enemy" = not my team). AI must handle 20–40+ Actions per character efficiently. AI must evaluate multi-resource Action costs, tag-scoped Stat Adjustment bonuses (including multi-tag additive stacking), stealth/detection trade-offs (passive + active Search), revival priority, and resource conservation. Judgment derived stat (40% Awareness + 35% Willpower + 25% Intellect) controls AI decision quality via the Utility AI system (blend, sharpness, and lookahead depth). Combat log must record AI scoring data (top 3 Actions per turn with scores). Combat system passes context flags to AI at fight start (canonical schema defined here). Characters within a tick act sequentially in Initiative order with state updates between each. `resource_efficiency` Scorer uses fight phase signal (current_tick / attrition_ramp_onset) for conservation strategy. AI must factor shield HP, Block Chance, and per-type Soak into target vulnerability and damage output assessments. AI must evaluate primary damage type choice for mixed Actions (which Defense is weaker). Dying Blow Actions need AI handling (character at ≤0 HP still acts). AI must evaluate hybrid heal+revive Actions for both living and Fallen allies. AI must factor self-heal as a high-priority Dying Blow option. AI must evaluate summon control capacity when deciding to summon. Default Attack Stamina cost feeds into `resource_efficiency` Scorer. **Round 20**: AI must evaluate off-hand bonus attack value (sequential second pass). AI `aoe_net_value` Scorer must account for friendly fire going through full pipeline. AI must factor Might-based armor Speed mitigation into equipment evaluation. **Round 26**: Off-hand fires on debuff-only enemy Actions (AI scoring update). Kill triggers are deferred to Step 5 (AI can't rely on immediate OnKill during Actions). Detection is per-turn (AI stealth evaluation must be per-character, not persistent). 7 new trigger events for AI Consideration evaluation: OnRevive, OnBlock, OnShieldBreak, OnHeal, OnHealedBy, OnDodge, OnSummon. Variable Action Speeds on default Actions (Search +50, Move/Defend +25) affect AI cost-benefit. |
| [post-combat](../post-combat.md) | Combat hands off to post-combat at victory/defeat. Provides: Combat Scoreboard (per-character stats including Dying Blows), Fallen list with overkill values, active Traits list (for Perk Discovery), Context Flags (exhibition status, event type), per-team elimination order/placement. Post-combat owns: injury/death checks, Perk Discovery resolution, recruitment, loot distribution. |
| [characters](../characters.md) | 9 Attributes feed all combat calculations via derived stat formulas (including Judgment, Physical Defense, 3 Soak families). **New derived stats**: Physical Defense (40% Speed + 35% Accuracy + 25% Awareness), Physical Soak (60% Endurance + 25% Might + 15% Speed), Elemental Soak (45% Endurance + 35% Awareness + 20% Luck), Magical Soak (55% Willpower + 25% Intellect + 20% Luck). Anatomical slots determine weapon/armor options. Stamina exhaustion (0→Health drain at 1:1 ratio), percentage-based Stamina regen + Defend boost. Fallen sub-state mechanics with full-tick deferral. Post-combat outcomes handled by [post-combat](../post-combat.md). **Round 20**: Might description updated — also mitigates armor Speed penalties via `Might/(Might+K_armor)` formula. |
| [traits-and-perks](../traits-and-perks/index.md) | Perks provide Actions, Stat Adjustments, Triggers. Traits unlock resource types. Effect resolution order within Actions: Revive (Step 0) → status → damage → movement (overrides simultaneous model). All cooldowns reset per-combat. Perk Discovery changed to per-Trait end-of-combat check (active Traits only) — resolved in [post-combat](../post-combat.md). Tag-scoped bonuses: flat or %, additive stacking, flat→% order. Trait/Perk level amplification multipliers shared curve ×1.0/×1.2/×1.4/×1.7/×2.0. Actions with Damage components need a `primary_damage_type` field. `OnDyingBlow` added to Trigger event vocabulary for "Last Stand" style Perks. **Round 20**: Trigger chaining enabled with recursion guard — content authors should be aware Triggers can fire further Triggers. Status immunity Perks → reframe as "high Resistance + fast attribute-decay" Perks. **Round 26**: OnOverkill removed from vocabulary. 7 new triggers available for Perk content design (OnRevive, OnBlock, OnShieldBreak, OnHeal, OnHealedBy, OnDodge, OnSummon). Revive at Step 0 enables reliable hybrid heal+revive Actions. Hit bonus is primary-component-only (affects multi-component Action design). |
| [equipment](../equipment/index.md) | Weapons provide Attack/Damage values and damage type tags. Armor provides per-type Soak bonuses (Physical/Elemental/Magical families + per-type tags). Affixes can grant Penetration (universal, now with DR), crit bonuses, status riders, stealth-tagged effects, shield effects, starting Initiative offset. Equipment affixes use the tag system for synergies. **Round 20**: Block Chance position confirmed in combat pipeline (post-hit-bonus, pre-Soak). Off-hand bonus attack confirmed as sequential second pipeline pass. Penetration affixes need rebalancing for diminishing returns. Armor Speed penalty section needs cross-reference to Might mitigation formula. **Round 26**: No direct changes. Block clarified as not applying to DoTs (Block is a per-Action mechanic, not Effects Phase). |
| [consumables](../consumables.md) | Consumables are usable during combat turns (potions, bombs, scrolls). Consumables can provide revival (Revive effect component) and shields (Shield effect component). AI must decide when to use them. |
| [tournaments](../tournaments.md) | Tournament matches are combat instances. Multi-team formats supported with ranked elimination order. Attrition ramp onset and rate are per-event-type (specified in Context Flags). Per-combat cooldown and resource pool resets between rounds. Star-gated entry to manage power gaps. Post-combat phases (injury, discovery, recruitment, loot) handled by [post-combat](../post-combat.md). Fight length varies by event type (25–150 ticks). Event templates define starting zone assignments per team. |
| [meta-balance](../../architecture/meta-balance.md) | Combat Scoreboard data (win/loss per character, per Trait, per-character stats, Dying Blows) feeds the automatic underdog balancing system. |
| [data-model](../../architecture/data-model.md) | Must support: hidden system Trait type, effect component typed format (type tag + key-value parameters), target tag vocabulary (including `[Fallen]`), Trigger event vocabulary (including OnDyingBlow), per-family Soak values (3 families), universal Penetration with DR (`Pen×K/(Pen+K)`), Physical + Magic Defense as derived stats, per-component damage resolution (9-step pipeline), overkill tracking per Fallen character, Combat Scoreboard per-character stat accumulation (including Dying Blows), Shield instances (HP pool, duration, type filter, FIFO ordering), Context Flags schema, attrition ramp state, event template schema (starting zones per team, Initiative offsets), seeded PRNG per combat, structured event stream/log storage, per-team elimination order tracking, `primary_damage_type` field on Actions. Summon control capacity Resource Pool per summoner Trait, per-summon control cost field, formula representation (`{base, weights}` + optional `formula_override`), formula modifier `scope` field (list of formula categories), Resistance K values per type, default Attack Stamina cost. **Round 20**: All combat values are integers (ceiling rounding). Status type definitions gain `decay_formula` field. Block Chance as pipeline step. Off-hand bonus attack as second Action. Trigger recursion guard per-event. Might armor mitigation formula. Penetration K_pen constant. **Round 26**: Effects Phase sub-ordering (decay→effects→shield expiry). Step 5 kill trigger queue with deferred entries. Revive Step 0 in resolution pipeline. Default Action Speed values (Search +50, Move/Defend +25). Per-turn detection state (no persistent detection tracking needed). 7 new trigger event types, OnOverkill removed. |

---

_Last updated: 2026-02-22 — Rounds 26-31 interrogation: 23 additional decisions. Hit bonus primary-component-only. Deferred OnKill trigger queue (Step 5). Kill Triggers as new tick resolution step. Effects Phase internal ordering (decay→effects→shield expiry). Default Action Speeds (Search +50, Move/Defend +25, Attack 0). Revive at Step 0 in effect resolution. Per-turn detection persistence (no persistent state). Trigger vocabulary expansion (7 new: OnRevive, OnBlock, OnShieldBreak, OnHeal, OnHealedBy, OnDodge, OnSummon; 1 removed: OnOverkill). DoTs bypass Block. Summon death triggers. Defend+Stun accepted strategy. Crowd Appeal deferred. True clean slate on revival. Total: 143 decisions across 31 rounds. Previous: rounds 20-25 (20 decisions), rounds 14-19 (18 decisions), rounds 10-13 (11 decisions), round 9 (24 decisions), round 8 (20 decisions), rounds 1-7 (27 decisions)._
